import{d as T,e as h,i as w,q as A,c as i,w as q,j as b,v as m,a as s,t as u,y as d,b as x,F as C,o as n}from"./index.436f3a49.js";import{r as f,m as g}from"./validations.017a1993.js";const S=["onSubmit"],V=s("label",{for:"title"},"Title",-1),N=["aria-invalid"],j={key:0},U=s("label",{for:"author"},"Author",-1),z=["aria-invalid"],M={key:1},D=s("label",{for:"abstract"},"Abstract",-1),E=["aria-invalid"],F={key:2},I=s("button",{type:"submit"},"Submit",-1),L={key:1},J=T({__name:"BookEdit",props:{isbn:{}},setup(c){const o=h(null),v=h(!1),t=h({title:"",author:"",abstract:""});async function y(a){o.value=null,v.value=!1;const e=await fetch(`https://bookmonkey-read-only.onrender.com/books/${a}`),l=await e.json();e.status===200&&(o.value=l),v.value=!0,p(),k(),_()}w(()=>y(c.isbn)),A(()=>c.isbn,a=>y(a));function B(){Object.keys(t.value).some(a=>t.value[a]!=="")?console.log("Invalid form"):fetch(new Request(`https://bookmonkey-read-only.onrender.com/books/${c.isbn}`,{method:"PUT",body:JSON.stringify(o.value),headers:{"Content-Type":"application/json"}}))}function p(){var a,e,l,r;f((e=(a=o.value)==null?void 0:a.title)!=null?e:"")?g((r=(l=o.value)==null?void 0:l.title)!=null?r:"",5)?t.value.title="":t.value.title="The title must be at least 5 characters long.":t.value.title="Title is required."}function k(){var a,e;f((e=(a=o.value)==null?void 0:a.author)!=null?e:"")?t.value.author="":t.value.author="Author is required."}function _(){var a,e,l,r;f((e=(a=o.value)==null?void 0:a.abstract)!=null?e:"")?g((r=(l=o.value)==null?void 0:l.abstract)!=null?r:"",12)?t.value.abstract="":t.value.abstract="The abstract must be at least 12 characters long.":t.value.abstract="Abstract is required."}return(a,e)=>v.value?(n(),i(C,{key:0},[o.value?(n(),i("form",{key:0,onSubmit:q(B,["prevent"]),novalidate:""},[V,b(s("input",{type:"text",id:"title",name:"title",placeholder:"Book Title","onUpdate:modelValue":e[0]||(e[0]=l=>o.value.title=l),onChange:p,"aria-invalid":t.value.title.length>0},null,40,N),[[m,o.value.title,void 0,{lazy:!0,trim:!0}]]),t.value.title?(n(),i("small",j,u(t.value.title),1)):d("",!0),U,b(s("input",{type:"text",id:"author",name:"author",placeholder:"Book Author","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.author=l),onChange:k,"aria-invalid":t.value.author.length>0},null,40,z),[[m,o.value.author,void 0,{lazy:!0,trim:!0}]]),t.value.author?(n(),i("small",M,u(t.value.author),1)):d("",!0),D,b(s("textarea",{id:"abstract",name:"abstract",placeholder:"Book Abstract","onUpdate:modelValue":e[2]||(e[2]=l=>o.value.abstract=l),onChange:_,"aria-invalid":t.value.abstract.length>0},null,40,E),[[m,o.value.abstract,void 0,{lazy:!0,trim:!0}]]),t.value.abstract?(n(),i("small",F,u(t.value.abstract),1)):d("",!0),I],40,S)):(n(),i("span",L,[x(" We couldn't find any book with the ISBN "),s("strong",null,u(a.isbn),1)]))],64)):d("",!0)}});export{J as default};
