import{d as T,r as h,l as A,m as w,e as i,n as x,p as b,v as m,f as s,t as d,q as c,F as q,i as C,o as n}from"./books.79f03da5.js";import{r as f,m as g}from"./validations.017a1993.js";const S=["onSubmit"],V=s("label",{for:"title"},"Title",-1),N=["aria-invalid"],U={key:0},j=s("label",{for:"author"},"Author",-1),z=["aria-invalid"],M={key:1},D=s("label",{for:"abstract"},"Abstract",-1),E=["aria-invalid"],F={key:2},I=s("button",{type:"submit"},"Submit",-1),L={key:1},O=C(" We couldn't find any book with the ISBN "),P=T({__name:"BookEdit",props:{isbn:null},setup(u){const a=h(null),v=h(!1),t=h({title:"",author:"",abstract:""});async function y(o){a.value=null,v.value=!1;const e=await fetch(`https://bookmonkey-read-only.onrender.com/books/${o}`),l=await e.json();e.status===200&&(a.value=l),v.value=!0,k(),p(),_()}A(()=>y(u.isbn)),w(()=>u.isbn,o=>y(o));function B(){Object.keys(t.value).some(o=>t.value[o]!=="")?console.log("Invalid form"):fetch(new Request(`https://bookmonkey-read-only.onrender.com/books/${u.isbn}`,{method:"PUT",body:JSON.stringify(a.value),headers:{"Content-Type":"application/json"}}))}function k(){var o,e,l,r;f((e=(o=a.value)==null?void 0:o.title)!=null?e:"")?g((r=(l=a.value)==null?void 0:l.title)!=null?r:"",5)?t.value.title="":t.value.title="The title must be at least 5 characters long.":t.value.title="Title is required."}function p(){var o,e;f((e=(o=a.value)==null?void 0:o.author)!=null?e:"")?t.value.author="":t.value.author="Author is required."}function _(){var o,e,l,r;f((e=(o=a.value)==null?void 0:o.abstract)!=null?e:"")?g((r=(l=a.value)==null?void 0:l.abstract)!=null?r:"",12)?t.value.abstract="":t.value.abstract="The abstract must be at least 12 characters long.":t.value.abstract="Abstract is required."}return(o,e)=>v.value?(n(),i(q,{key:0},[a.value?(n(),i("form",{key:0,onSubmit:x(B,["prevent"]),novalidate:""},[V,b(s("input",{type:"text",id:"title",name:"title",placeholder:"Book Title","onUpdate:modelValue":e[0]||(e[0]=l=>a.value.title=l),onChange:k,"aria-invalid":t.value.title.length>0},null,40,N),[[m,a.value.title,void 0,{lazy:!0,trim:!0}]]),t.value.title?(n(),i("small",U,d(t.value.title),1)):c("",!0),j,b(s("input",{type:"text",id:"author",name:"author",placeholder:"Book Author","onUpdate:modelValue":e[1]||(e[1]=l=>a.value.author=l),onChange:p,"aria-invalid":t.value.author.length>0},null,40,z),[[m,a.value.author,void 0,{lazy:!0,trim:!0}]]),t.value.author?(n(),i("small",M,d(t.value.author),1)):c("",!0),D,b(s("textarea",{id:"abstract",name:"abstract",placeholder:"Book Abstract","onUpdate:modelValue":e[2]||(e[2]=l=>a.value.abstract=l),onChange:_,"aria-invalid":t.value.abstract.length>0},null,40,E),[[m,a.value.abstract,void 0,{lazy:!0,trim:!0}]]),t.value.abstract?(n(),i("small",F,d(t.value.abstract),1)):c("",!0),I],40,S)):(n(),i("span",L,[O,s("strong",null,d(u.isbn),1)]))],64)):c("",!0)}});export{P as default};
