import{d as S,e as d,i as T,c as r,F as A,k as v,v as c,a as s,t as b,s as h,w as C,o as n}from"./index.612aaa04.js";import{r as m,m as _}from"./validations.017a1993.js";const x={key:0},N={key:1},q=["onSubmit"],w=s("label",{for:"isbn"},"ISBN",-1),I=["aria-invalid"],V={key:0},z=s("label",{for:"title"},"Title",-1),U=["aria-invalid"],M={key:1},O=s("label",{for:"author"},"Author",-1),j=["aria-invalid"],D={key:2},F=s("label",{for:"abstract"},"Abstract",-1),P=["aria-invalid"],E={key:3},J=s("button",{type:"submit"},"Submit",-1),H=S({__name:"BookCreate",setup(L){const a=d({isbn:"",title:"",abstract:"",author:""}),u=d(!1),f=d(!1),e=d({isbn:"",title:"",author:"",abstract:""});function B(){if(Object.keys(e.value).some(o=>e.value[o]!==""))console.log("Invalid form");else{u.value=!1,f.value=!1;try{fetch(new Request("https://bookmonkey-read-only.onrender.com/books",{method:"POST",body:JSON.stringify(a.value),headers:{"Content-Type":"application/json"}})),u.value=!0}catch{u.value=!1}finally{f.value=!0}}}function p(){var o,t,l,i;m((t=(o=a.value)==null?void 0:o.isbn)!=null?t:"")?_((i=(l=a.value)==null?void 0:l.isbn)!=null?i:"",13)?e.value.isbn="":e.value.isbn="The ISBN must be at least 13 characters long.":e.value.isbn="ISBN is required."}function y(){var o,t,l,i;m((t=(o=a.value)==null?void 0:o.title)!=null?t:"")?_((i=(l=a.value)==null?void 0:l.title)!=null?i:"",5)?e.value.title="":e.value.title="The title must be at least 5 characters long.":e.value.title="Title is required."}function k(){var o,t;m((t=(o=a.value)==null?void 0:o.author)!=null?t:"")?e.value.author="":e.value.author="Author is required."}function g(){var o,t,l,i;m((t=(o=a.value)==null?void 0:o.abstract)!=null?t:"")?_((i=(l=a.value)==null?void 0:l.abstract)!=null?i:"",12)?e.value.abstract="":e.value.abstract="The abstract must be at least 12 characters long.":e.value.abstract="Abstract is required."}return T(()=>{p(),y(),k(),g()}),(o,t)=>f.value?(n(),r(A,{key:0},[u.value?(n(),r("p",x,"Successfully created new book.")):(n(),r("p",N,"An error occured."))],64)):(n(),r("form",{key:1,onSubmit:C(B,["prevent"]),novalidate:""},[w,v(s("input",{type:"text",id:"isbn",name:"isbn",placeholder:"Book ISBN","onUpdate:modelValue":t[0]||(t[0]=l=>a.value.isbn=l),onChange:p,"aria-invalid":e.value.isbn.length>0},null,40,I),[[c,a.value.isbn,void 0,{lazy:!0,trim:!0}]]),e.value.isbn?(n(),r("small",V,b(e.value.isbn),1)):h("",!0),z,v(s("input",{type:"text",id:"title",name:"title",placeholder:"Book Title","onUpdate:modelValue":t[1]||(t[1]=l=>a.value.title=l),onChange:y,"aria-invalid":e.value.title.length>0},null,40,U),[[c,a.value.title,void 0,{lazy:!0,trim:!0}]]),e.value.title?(n(),r("small",M,b(e.value.title),1)):h("",!0),O,v(s("input",{type:"text",id:"author",name:"author",placeholder:"Book Author","onUpdate:modelValue":t[2]||(t[2]=l=>a.value.author=l),onChange:k,"aria-invalid":e.value.author.length>0},null,40,j),[[c,a.value.author,void 0,{lazy:!0,trim:!0}]]),e.value.author?(n(),r("small",D,b(e.value.author),1)):h("",!0),F,v(s("textarea",{id:"abstract",name:"abstract",placeholder:"Book Abstract","onUpdate:modelValue":t[3]||(t[3]=l=>a.value.abstract=l),onChange:g,"aria-invalid":e.value.abstract.length>0},null,40,P),[[c,a.value.abstract,void 0,{lazy:!0,trim:!0}]]),e.value.abstract?(n(),r("small",E,b(e.value.abstract),1)):h("",!0),J],40,q))}});export{H as default};
