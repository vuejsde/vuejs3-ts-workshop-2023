import{d as v,o as i,c,a as e,w as h,r as y,b as u,e as m,f as _,g as p,t as f,F as k,h as w,i as g,j as B,k as C,v as D,u as $,l as R,m as L,n as I,p as V}from"./index.612aaa04.js";const N=["open"],P=u("Do you want to confirm?"),S=u("Do you really want to confirm your action?"),j=v({__name:"ConfirmationDialog",props:{show:{type:Boolean}},emits:["confirm","cancel"],setup(n){return(o,t)=>(i(),c("dialog",{open:n.show},[e("article",null,[e("a",{href:"#close","aria-label":"Close",class:"close",onClick:t[0]||(t[0]=h(a=>o.$emit("cancel"),["prevent"]))}),e("h3",null,[y(o.$slots,"header",{},()=>[P])]),e("p",null,[y(o.$slots,"body",{},()=>[S])]),e("footer",null,[e("a",{href:"#cancel",role:"button",class:"secondary",onClick:t[1]||(t[1]=h(a=>o.$emit("cancel"),["prevent"]))}," Cancel "),e("a",{href:"#confirm",role:"button",onClick:t[2]||(t[2]=h(a=>o.$emit("confirm"),["prevent"]))}," Confirm ")])])],8,N))}}),M=["src"],T=["disabled"],F={key:0},q={key:1},E=u(" Confirm read action "),U=v({__name:"BookListItem",props:{title:null,isbn:null,numPages:null,cover:null,read:{type:Boolean}},emits:["read"],setup(n,{emit:o}){function t(){l(),o("read")}const a=m(!1);function r(){a.value=!0}function l(){a.value=!1}return(s,d)=>{const b=w("RouterLink");return i(),c(k,null,[e("tr",null,[e("td",null,[_(b,{to:{name:"book-detail",params:{isbn:n.isbn}}},{default:p(()=>[u(f(n.isbn),1)]),_:1},8,["to"])]),e("td",null,f(n.title),1),e("td",null,f(n.numPages),1),e("td",null,[e("img",{src:n.cover,width:"100"},null,8,M)]),e("td",null,[e("button",{onClick:r,disabled:n.read},[n.read?(i(),c("span",F,"\u2705")):(i(),c("span",q,"Read"))],8,T)])]),_(j,{show:a.value,onCancel:l,onConfirm:t},{header:p(()=>[E]),body:p(()=>[u(" Do you really want to mark the book '"+f(n.title)+"' as read? ",1)]),_:1},8,["show"])],64)}}});function x(n){const o=m([]),t=m(!1),a=m("");async function r(s){t.value=!1,o.value=[];const d=await fetch(`${n}?q=${s}`);o.value=await d.json(),t.value=!0}async function l(){const s=await fetch(`${n}?_start=0&_end=50`);o.value=await s.json(),t.value=!0}return g(()=>{l()}),B(a,s=>{r(s)}),{books:o,isLoaded:t,userInput:a}}const z=e("label",{for:"search"},"Search",-1),A={role:"grid"},G=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"ISBN"),e("th",{scope:"col"},"Title"),e("th",{scope:"col"},"Pages"),e("th",{scope:"col"},"Cover"),e("th",{scope:"col"},"Read?")])],-1),J=v({__name:"BookList",setup(n){const{books:o,userInput:t}=x("https://bookmonkey-read-only.onrender.com/books");function a(r){var l;o.value[r]={...o.value[r],read:!((l=o.value[r])!=null&&l.read)}}return(r,l)=>(i(),c(k,null,[e("form",null,[z,C(e("input",{type:"search",id:"search",name:"search",placeholder:"Book title","onUpdate:modelValue":l[0]||(l[0]=s=>R(t)?t.value=s:null)},null,512),[[D,$(t)]])]),e("table",A,[G,e("tbody",null,[(i(!0),c(k,null,L($(o),(s,d)=>(i(),I(U,V({key:s.isbn},s,{onRead:b=>a(d)}),null,16,["onRead"]))),128))])])],64))}});export{J as default};
