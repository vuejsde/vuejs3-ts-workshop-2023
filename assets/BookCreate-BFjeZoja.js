import{d as B,e as u,i as S,c as s,F as T,j as d,v,a as o,t as c,y as b,w as A,o as i}from"./index-ehnKHy1Q.js";import{r as h,m as f}from"./validations-VqEmv7vp.js";const C={key:0},x={key:1},N=o("label",{for:"isbn"},"ISBN",-1),q=["aria-invalid"],w={key:0},I=o("label",{for:"title"},"Title",-1),V=["aria-invalid"],z={key:1},U=o("label",{for:"author"},"Author",-1),j=["aria-invalid"],M={key:2},O=o("label",{for:"abstract"},"Abstract",-1),D=["aria-invalid"],F={key:3},P=o("button",{type:"submit"},"Submit",-1),R=B({__name:"BookCreate",setup(E){const a=u({isbn:"",title:"",abstract:"",author:""}),n=u(!1),m=u(!1),e=u({isbn:"",title:"",author:"",abstract:""});function g(){if(Object.keys(e.value).some(l=>e.value[l]!==""))console.log("Invalid form");else{n.value=!1,m.value=!1;try{fetch(new Request("https://bookmonkey-read-only.onrender.com/books",{method:"POST",body:JSON.stringify(a.value),headers:{"Content-Type":"application/json"}})),n.value=!0}catch{n.value=!1}finally{m.value=!0}}}function p(){var l,t;h(((l=a.value)==null?void 0:l.isbn)??"")?f(((t=a.value)==null?void 0:t.isbn)??"",13)?e.value.isbn="":e.value.isbn="The ISBN must be at least 13 characters long.":e.value.isbn="ISBN is required."}function _(){var l,t;h(((l=a.value)==null?void 0:l.title)??"")?f(((t=a.value)==null?void 0:t.title)??"",5)?e.value.title="":e.value.title="The title must be at least 5 characters long.":e.value.title="Title is required."}function y(){var l;h(((l=a.value)==null?void 0:l.author)??"")?e.value.author="":e.value.author="Author is required."}function k(){var l,t;h(((l=a.value)==null?void 0:l.abstract)??"")?f(((t=a.value)==null?void 0:t.abstract)??"",12)?e.value.abstract="":e.value.abstract="The abstract must be at least 12 characters long.":e.value.abstract="Abstract is required."}return S(()=>{p(),_(),y(),k()}),(l,t)=>m.value?(i(),s(T,{key:0},[n.value?(i(),s("p",C,"Successfully created new book.")):(i(),s("p",x,"An error occured."))],64)):(i(),s("form",{key:1,onSubmit:A(g,["prevent"]),novalidate:""},[N,d(o("input",{type:"text",id:"isbn",name:"isbn",placeholder:"Book ISBN","onUpdate:modelValue":t[0]||(t[0]=r=>a.value.isbn=r),onChange:p,"aria-invalid":e.value.isbn.length>0},null,40,q),[[v,a.value.isbn,void 0,{lazy:!0,trim:!0}]]),e.value.isbn?(i(),s("small",w,c(e.value.isbn),1)):b("",!0),I,d(o("input",{type:"text",id:"title",name:"title",placeholder:"Book Title","onUpdate:modelValue":t[1]||(t[1]=r=>a.value.title=r),onChange:_,"aria-invalid":e.value.title.length>0},null,40,V),[[v,a.value.title,void 0,{lazy:!0,trim:!0}]]),e.value.title?(i(),s("small",z,c(e.value.title),1)):b("",!0),U,d(o("input",{type:"text",id:"author",name:"author",placeholder:"Book Author","onUpdate:modelValue":t[2]||(t[2]=r=>a.value.author=r),onChange:y,"aria-invalid":e.value.author.length>0},null,40,j),[[v,a.value.author,void 0,{lazy:!0,trim:!0}]]),e.value.author?(i(),s("small",M,c(e.value.author),1)):b("",!0),O,d(o("textarea",{id:"abstract",name:"abstract",placeholder:"Book Abstract","onUpdate:modelValue":t[3]||(t[3]=r=>a.value.abstract=r),onChange:k,"aria-invalid":e.value.abstract.length>0},null,40,D),[[v,a.value.abstract,void 0,{lazy:!0,trim:!0}]]),e.value.abstract?(i(),s("small",F,c(e.value.abstract),1)):b("",!0),P],32))}});export{R as default};
