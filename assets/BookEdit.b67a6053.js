import{d as A,r as h,l as w,m as x,e as i,n as q,p as b,v as m,f as s,t as u,q as d,F as C,i as S,o as n}from"./books.f7a72479.js";import{r as f,m as B}from"./validations.017a1993.js";const V=["onSubmit"],N=s("label",{for:"title"},"Title",-1),U=["aria-invalid"],j={key:0},z=s("label",{for:"author"},"Author",-1),M=["aria-invalid"],D={key:1},E=s("label",{for:"abstract"},"Abstract",-1),F=["aria-invalid"],I={key:2},L=s("button",{type:"submit"},"Submit",-1),O={key:1},$=S(" We couldn't find any book with the ISBN "),R=A({__name:"BookEdit",props:{isbn:null},setup(p){const{isbn:c}=p,a=h(null),v=h(!1),t=h({title:"",author:"",abstract:""});async function y(o){a.value=null,v.value=!1;const e=await fetch(`https://bookmonkey-read-only.onrender.com/books/${o}`),l=await e.json();e.status===200&&(a.value=l),v.value=!0,_(),k(),g()}w(()=>y(c)),x(()=>c,o=>y(o));function T(){Object.keys(t.value).some(o=>t.value[o]!=="")?console.log("Invalid form"):fetch(new Request(`https://bookmonkey-read-only.onrender.com/books/${c}`,{method:"PUT",body:JSON.stringify(a.value),headers:{"Content-Type":"application/json"}}))}function _(){var o,e,l,r;f((e=(o=a.value)==null?void 0:o.title)!=null?e:"")?B((r=(l=a.value)==null?void 0:l.title)!=null?r:"",5)?t.value.title="":t.value.title="The title must be at least 5 characters long.":t.value.title="Title is required."}function k(){var o,e;f((e=(o=a.value)==null?void 0:o.author)!=null?e:"")?t.value.author="":t.value.author="Author is required."}function g(){var o,e,l,r;f((e=(o=a.value)==null?void 0:o.abstract)!=null?e:"")?B((r=(l=a.value)==null?void 0:l.abstract)!=null?r:"",12)?t.value.abstract="":t.value.abstract="The abstract must be at least 12 characters long.":t.value.abstract="Abstract is required."}return(o,e)=>v.value?(n(),i(C,{key:0},[a.value?(n(),i("form",{key:0,onSubmit:q(T,["prevent"]),novalidate:""},[N,b(s("input",{type:"text",id:"title",name:"title",placeholder:"Book Title","onUpdate:modelValue":e[0]||(e[0]=l=>a.value.title=l),onChange:_,"aria-invalid":t.value.title.length>0},null,40,U),[[m,a.value.title,void 0,{lazy:!0,trim:!0}]]),t.value.title?(n(),i("small",j,u(t.value.title),1)):d("",!0),z,b(s("input",{type:"text",id:"author",name:"author",placeholder:"Book Author","onUpdate:modelValue":e[1]||(e[1]=l=>a.value.author=l),onChange:k,"aria-invalid":t.value.author.length>0},null,40,M),[[m,a.value.author,void 0,{lazy:!0,trim:!0}]]),t.value.author?(n(),i("small",D,u(t.value.author),1)):d("",!0),E,b(s("textarea",{id:"abstract",name:"abstract",placeholder:"Book Abstract","onUpdate:modelValue":e[2]||(e[2]=l=>a.value.abstract=l),onChange:g,"aria-invalid":t.value.abstract.length>0},null,40,F),[[m,a.value.abstract,void 0,{lazy:!0,trim:!0}]]),t.value.abstract?(n(),i("small",I,u(t.value.abstract),1)):d("",!0),L],40,V)):(n(),i("span",O,[$,s("strong",null,u(p.isbn),1)]))],64)):d("",!0)}});export{R as default};
